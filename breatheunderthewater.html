<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>breathunderthewater</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles1.css">
    <link rel="stylesheet" href="turtle.css">
    <link rel="stylesheet" href="whales.css">
    <p align="center">
        <!--This draws the Canvas on the webpage -->
        <canvas id="mycanvas"></canvas>
    </p>
</head>


<body>
    <div class="background">
        <div class="water"></div>

    <div class='scene'>
        <div class='wrapper'>
            <div class='jellyfish'>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
            </div>
        </div>
    </div>
    <div class='scene'>
        <div class='wrapper1'>
            <div class='jellyfish'>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
                <div class='jellyfish_ring'></div>
            </div>
        </div>
    </div>
    <!-- <div class='scene2'>
        <div class='wrapper2'>
            <div class='turtlingsss'> -->
        <div class='turtling0'><img src="image/turtle/t0.png" /></div>
        <div class='turtling1'><img src="image/turtle/t1.png" /></div>
        <div class='turtling3'><img src="image/turtle/t3.png" /></div>
        <div class='turtling4'><img src="image/turtle/t4.png" /></div>
        <div class='turtling5'><img src="image/turtle/t5.png" /></div>
        <div class='turtling'><img src="image/turtle/t6.png" /></div>
        <div class='turtling'><img src="image/turtle/t7.png" /></div>
        <div class='turtling'><img src="image/turtle/t8.png" /></div>
        <div class='turtling'><img src="image/turtle/t11.png" /></div>
        <div class='turtling'><img src="image/turtle/t0.png" /></div>
        <div class='turtling'><img src="image/turtle/t1.png" /></div>
        <div class='turtling'><img src="image/turtle/t3.png" /></div>
        <div class='turtling'><img src="image/turtle/t4.png" /></div>
        <div class='turtling'><img src="image/turtle/t5.png" /></div>
        <div class='turtling'><img src="image/turtle/t6.png" /></div>
        <div class='turtling'><img src="image/turtle/t7.png" /></div>
        <div class='turtling8'><img src="image/turtle/t8.png" /></div>
        <div class='turtling11'><img src="image/turtle/t11.png" /></div>
            </div>
        </div>
    </div> -->
    <h1> Wearing mask, people seem to breathe under the water.</h1>

    <h2> 你本是水，要归于水。于是雨收敛了最初的锋芒，汇成溪流，注入河中..</h2>
    <img class="shark" src="image/shark.png" width=400px;></img>
    <img class="facai2" src="image/facai2.png" width=400px;></img>
    <img class="shark2" src="image/shark2.png" width=400px;></img>
    <img class="stingay" src="stingay.png" width=280px;></img>
    <img class="seastar" src="seaStar.png" width=200px;></img>
    <img class="seaAnimal" src="seaAnimal4.png" width=200px;></img>
    <img class="jelly" src="jelly.png" width=230px;></img>
    <img class="jellyfish3" src="jellyfish3.png" width=200px;></img>
    <img class="turtle" src="turtle.png" width=300px;></img>
    <img class="lobster" src="lobster.png" width=300px;></img>
    <img class="stone" src="stone.png" width=300px;></img>
    <img class="crab" src="crab.png" width=200px;></img>
    <img class="backgd" src="image/backgd.png" width=100%;></img>
    <img class="whale0" src="image/whale0.png" width=25%;></img>
    <img class="whale" src="image/whale.png" width=25%;></img>
    <img class="whale1" src="image/whale1.png" width=25%;></img>
    <img class="whale3" src="image/whale3.png" width=25%;></img>
    <div>
        <!-- Cat walking GIF from: http://www.anniemation.com/clip_art/graphics.html -->
        <!-- <img id="cat" src="https://www.kasandbox.org/programming-images/misc/cat-walk.gif"> -->
    </div>
    <audio autoplay loop>    
      
        <source src="dola.mp3" type="audio/mpeg">
    </audio>



    <audio controls>    
      
        <source src="soLong.mp3" type="audio/mpeg">
    </audio>

    <audio controls>    
        <source src="getdown.mp3" type="audio/mpeg">
       
    </audio>
   
    <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script>
    <script src="salmon.js" charset="utf-8"> </script>
    <script>
        var sketchProc = function(processingInstance) {
            with(processingInstance) {
                size(1920, 1080);
                frameRate(30);
                	var canvas = document.querySelector('canvas');
                var c = canvas.getContext('2d');

                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;

                window.addEventListener("resize", function () {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                });


                // var catEl = document.getElementById("cat"); //cat

                // var startTime = new Date().getTime(); //cat
                     

              
                var Particle = function(position) {
                    this.acceleration = new PVector(0, -0.05);
                    this.velocity = new PVector(random(-0.9, 1), random(-0.9, 0));
                    this.position = position.get();
                    this.timeToLive = 200;
                };

                Particle.prototype.run = function() {
                    this.update();
                    this.display();
                };

                Particle.prototype.update = function() {
                    this.velocity.add(this.acceleration);
                    this.position.add(this.velocity);
                    this.timeToLive -= 2;
                };

                Particle.prototype.display = function() {
                    stroke(235, 235, 235, 80);
                    strokeWeight(2);
                    fill(255, 255, 255, 40);
                    var radius = (height - this.position.y) / 100;
                    ellipse(this.position.x, this.position.y, radius, radius);
                };

                Particle.prototype.isDead = function() {
                    if (this.timeToLive < 0) {
                        return true;
                    } else {
                        return false;
                    }
                };

                var ParticleSystem = function(position) {
                    this.origin = position.get();
                    this.particles = [];
                };

                ParticleSystem.prototype.addParticle = function() {
                    this.particles.push(new Particle(this.origin));
                };

                ParticleSystem.prototype.run = function() {
                    for (var i = this.particles.length - 1; i >= 0; i--) {
                        var p = this.particles[i];
                        p.run();
                        if (p.isDead()) {
                            this.particles.splice(i, 1);
                        }
                    }
                };

                var Fish = function(position) {
                    this.position = position.get();
                    this.width = 100;
                    this.height = 60;
                };

                Fish.prototype.swim = function() {

                    this.position.x += 2.8;
                    this.position.y -= 0.5;
                    // if (this.position.x > 1800) {
                    //     this.position.x = -120;
                    // }

                    // if (this.position.y < 0) {
                    //     this.position.y = 600;

            if (this.position.x> (canvas.width * 0.76) && this.position.y < 0.22 * canvas.height) {
            this.position.x = 0;
        } else if (this.position.x> canvas.width) {
            this.position.x = 0;
        } else if (this.position.y< 0) {
            this.position.y = canvas.height;
        }
                    }

               

                Fish.prototype.display = function() {
                    noStroke();
                    fill(255, (this.position.x/3), (this.position.y/3));
                    ellipse(this.position.x, this.position.y, this.width, this.height);
                    triangle(this.position.x - this.width / 2 + 10, this.position.y,
                        this.position.x - this.width * 0.75, this.position.y + this.height / 3,
                        this.position.x - this.width * 0.75, this.position.y - this.height / 3);
                    fill(255, 191, 0);
                    triangle(this.position.x + this.width / 2 + 10, this.position.y - this.height / 12,
                        this.position.x + this.width / 2 - 2, this.position.y + this.height / 8,
                        this.position.x + this.width / 2 - 2, this.position.y - this.height / 8);
                    triangle(this.position.x + this.width / 2 + 10, this.position.y - this.height / 12 + 18,
                        this.position.x + this.width / 2 - 10, this.position.y + this.height / 8 + 10,
                        this.position.x + this.width / 2 - 12, this.position.y - this.height / 8 + 10);
                    fill(255, 255, 255);
                    ellipse(this.position.x + this.width / 2 - 10, this.position.y - 11, 15, 20);
                    fill(0, 0, 0);
                    ellipse(this.position.x + this.width / 2 - 7, this.position.y - 10, 6, 6);
                };

                Fish.prototype.getMouthPosition = function() {
                    return new PVector(this.position.x + this.width / 2 + 10, this.position.y);
                };

        var fish = new Fish(new PVector(width / 2, height / 2));                
        var bubbles = new ParticleSystem(fish.getMouthPosition());

        var fish2=new Fish(new PVector(width/3, height/3));
        var bubbles2 = new ParticleSystem(fish2.getMouthPosition());

        var fish3 = new Fish(new PVector(width / 4, height / 4));
        var bubbles3 = new ParticleSystem(fish3.getMouthPosition());


        var Salmon = function (centerX, centerY, bodyLength, bodyHeight) {
            // this.position = position.get();
            this.X = centerX;
            this.Y = centerY;
            this.L = bodyLength;
            this.H = bodyHeight;
        };
               

        Salmon.prototype.display = function() {
            noStroke();
            // fill(233, 35, 35);
            fill((this.X+this.Y), (this.X/10), (this.cenertY/10));
            ellipse(this.X, this.Y, this.L, this.H);
            fill((this.X/5), (this.X/8+100), (this.Y/8));
            triangle(this.X - this.L / 2, this.Y, this.X - this.L / 2 - this.L / 4, this.Y - this.H / 2, this.X - this.L / 2 - this.L / 4, this.Y + this.H / 2);

            // eye
            fill(33, 33, 33);
            ellipse((this.X + this.L * 0.3), (this.Y - this.H * 0.1), this.H / 5, this.H / 5);
        }
        Salmon.prototype.swim = function () {
            this.X += 3;
            this.Y += 0.5;

            
            if (this.X > (canvas.width*0.76) && this.Y < 0.22*canvas.height) {
                this.X = 0;
            } else if (this.X > canvas.width) {
                this.X = 0;
            } else if (this.Y > canvas.height) {
                this.Y = 30;
            }
        }
          //    $(".whale").prototype=Object.create(Salmon.prototype);
            //    $(".whale").prototype.swim=function(){
            //        this.X -= 3;
            //        this.Y += 0.5;
            //    }
                var salmon = new Salmon(60,45,65,38);
                var salmon1 = new Salmon(100, 160, 50, 29);
                var salmon2 = new Salmon(150, 65, 65, 38);
                 var salmon3 = new Salmon(600, 780, 30, 17);
                var salmon4 = new Salmon(880, 580, 26, 14);
                var salmon5 = new Salmon(300, 880, 60, 34);
                var salmon6 = new Salmon(180, 680, 18, 10);

                var Salmons=[];
                
                for (var i = 3; i < 100; i++) {                
                    var salmon_i = new Salmon(20 * (i - 1)*Math.random(1), 20*(i-1)+0.6*canvas.height, 20, 11);
                    Salmons.push(salmon_i);
                }
        //   newSalmons=Salmons.map()

                draw = function() {
                    background(69, 176, 255, 5);

                    // newSalmons.display();
                    // newSalmons.swim();
                // map(Salmons[index].display(), index);
                // map(Salmons[index].swim(), index);
       
                salmon.display();
                salmon.swim();
                salmon1.display();
                salmon1.swim();
                salmon2.display();
                salmon2.swim();
                salmon3.display();
                salmon3.swim();
                salmon4.display();
                salmon4.swim();
                salmon5.display();
                salmon5.swim();
                salmon6.display();
                salmon6.swim();
                salmon_i.display();
                salmon_i.swim();
            
            Salmons[0].display();
            Salmons[0].swim();
            Salmons[1].display();
            Salmons[1].swim();
            Salmons[2].display();
            Salmons[2].swim();
            Salmons[3].display();
            Salmons[3].swim();
            Salmons[4].display();
            Salmons[4].swim();
            Salmons[5].display();
            Salmons[5].swim();
            Salmons[6].display();
            Salmons[6].swim();
            Salmons[7].display();
            Salmons[7].swim();
            Salmons[8].display();
            Salmons[8].swim();
            Salmons[9].display();
            Salmons[9].swim();
            Salmons[10].display();
            Salmons[10].swim();
            Salmons[11].display();
            Salmons[11].swim();
            Salmons[12].display();
            Salmons[12].swim();
            Salmons[13].display();
            Salmons[13].swim();
            Salmons[14].display();
            Salmons[14].swim();
            Salmons[15].display();
            Salmons[15].swim();
            Salmons[16].display();
            Salmons[16].swim();
            Salmons[17].display();
            Salmons[17].swim();
            Salmons[18].display();
            Salmons[18].swim();
            Salmons[19].display();
            Salmons[19].swim();
            Salmons[20].display();
            Salmons[20].swim();
            Salmons[21].display();
            Salmons[21].swim();
            Salmons[22].display();
            Salmons[22].swim();
            Salmons[23].display();
            Salmons[23].swim();
            Salmons[24].display();
            Salmons[24].swim();
            Salmons[25].display();
            Salmons[25].swim();
            Salmons[26].display();
            Salmons[26].swim();
            Salmons[27].display();
            Salmons[27].swim();
            Salmons[28].display();
            Salmons[28].swim();
            Salmons[29].display();
            Salmons[29].swim();
            Salmons[30].display();
            Salmons[30].swim();
            //     for (var j=0;j<Salmons.length;J++){
            //     Salmons[j].display();
            //     Salmons[j].swim();
            // }
            //     Salmons[j].swim();
                // $(".whale").swim();
                   
                    
                    if (frameCount % 17 === 1) {
                        bubbles.addParticle();
                        bubbles2.addParticle();
                        bubbles3.addParticle();

                    }

                    bubbles.addParticle();
                    bubbles2.addParticle();
                    bubbles3.addParticle();
                    bubbles.origin.set(fish.getMouthPosition());
                    bubbles2.origin.set(fish2.getMouthPosition());
                     bubbles3.origin.set(fish3.getMouthPosition());
                    bubbles.run();
                    bubbles2.run();
                    bubbles3.run();
                    fish.swim();
                    fish.display();
                    fish2.swim();
                    fish2.display();
                    fish3.swim();
                    fish3.display();        
         
                };

                // var walkTheCat = function() {
                //     var currTime = new Date().getTime();
                //     var secondsElapsed = ((currTime - startTime) / 1000);

                //     var newLeft = secondsElapsed * 50;

                //     catEl.style.left = newLeft + "px";
                //     window.requestAnimationFrame(walkTheCat);

                //     if (newLeft > 1600) {
                //         startTime = new Date().getTime();
                //     }

                // };


                // walkTheCat();



            }
        };


        // Get the canvas that Processing-js will use
        var canvas = document.getElementById("mycanvas");
        canvas.width = window.innerWidth;
        // Pass the function sketchProc (defined in myCode.js) to Processing's constructor.
        var processingInstance = new Processing(canvas, sketchProc);
    </script>
    


</body>

</html>